<?xml version="1.0"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
	<context-param>
		<param-name>company_id</param-name>
		<param-value>agloco.com</param-value>
	</context-param>
	<context-param>
		<param-name>root_path</param-name>
		<param-value>/</param-value>
	</context-param>
	<filter>
		<filter-name>Compression Filter</filter-name>
		<filter-class>com.liferay.filters.compression.CompressionFilter</filter-class>
	</filter>
	<filter>
		<filter-name>Layout Cache Filter - Friendly</filter-name>
		<filter-class>com.agloco.filter.LayoutCacheFilter</filter-class>
		<init-param>
			<param-name>pattern</param-name>
			<param-value>0</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>Layout Cache Filter - Layout</filter-name>
		<filter-class>com.agloco.filter.LayoutCacheFilter</filter-class>
		<init-param>
			<param-name>pattern</param-name>
			<param-value>1</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>Layout Cache Filter - Resource</filter-name>
		<filter-class>com.agloco.filter.LayoutCacheFilter</filter-class>
		<init-param>
			<param-name>pattern</param-name>
			<param-value>2</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>Secure MainServlet Filter</filter-name>
		<filter-class>com.liferay.filters.secure.SecureFilter</filter-class>
		<init-param>
			<param-name>portal_property_prefix</param-name>
			<param-value>main.servlet.</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>Strip Filter</filter-name>
		<filter-class>com.liferay.filters.strip.StripFilter</filter-class>
	</filter>
	
	<!-- SSL Filter Start -->
	<filter>
		<filter-name>SSL Filter</filter-name>
		<filter-class>com.agloco.filter.SSLFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>SSL Filter</filter-name>
		<url-pattern>/c/portal/login</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>SSL Filter</filter-name>
		<url-pattern>/group/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>SSL Filter</filter-name>
		<url-pattern>/web/guest/*</url-pattern>
	</filter-mapping>
	<!-- SSL Filter End -->
	
	<filter-mapping>
		<filter-name>Layout Cache Filter - Friendly</filter-name>
		<url-pattern>/group/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Layout Cache Filter - Friendly</filter-name>
		<url-pattern>/web/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Layout Cache Filter - Layout</filter-name>
		<url-pattern>/c/portal/layout</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Layout Cache Filter - Resource</filter-name>
		<url-pattern>/c/portal/css_cached</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Layout Cache Filter - Resource</filter-name>
		<url-pattern>/c/portal/javascript_cached</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>/c/portal/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>/group/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>/web/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>*.css</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>*.html</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>*.js</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Compression Filter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Secure MainServlet Filter</filter-name>
		<url-pattern>/c/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Secure MainServlet Filter</filter-name>
		<url-pattern>/group/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Secure MainServlet Filter</filter-name>
		<url-pattern>/web/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>/c/portal/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>/group/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>/web/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>*.css</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>*.html</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>*.js</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>Strip Filter</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>
	<listener>
		<listener-class>com.liferay.portal.servlet.PortalSessionListener</listener-class>
	</listener>
	<servlet>
		<servlet-name>InitServlet</servlet-name>
		<display-name>InitServlet</display-name>
		<servlet-class>com.liferay.portal.servlet.InitServlet</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>AgInitServlet</servlet-name>
		<display-name>AgInitServlet</display-name>
		<servlet-class>com.agloco.servlet.InitServlet</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>MainServlet</servlet-name>
		<display-name>MainServlet</display-name>
		<servlet-class>com.liferay.portal.servlet.MainServlet</servlet-class>
		<init-param>
			<param-name>config</param-name>
			<param-value>/WEB-INF/struts-config.xml,/WEB-INF/struts-config-ext.xml</param-value>
		</init-param>
		<init-param>
			<param-name>debug</param-name>
			<param-value>0</param-value>
		</init-param>
		<init-param>
			<param-name>detail</param-name>
			<param-value>0</param-value>
		</init-param>
		<load-on-startup>2</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>FriendlyURLPrivateServlet</servlet-name>
		<servlet-class>com.liferay.portal.servlet.FriendlyURLServlet</servlet-class>
		<init-param>
			<param-name>private</param-name>
			<param-value>true</param-value>
		</init-param>
		<load-on-startup>3</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>FriendlyURLPublicServlet</servlet-name>
		<servlet-class>com.liferay.portal.servlet.FriendlyURLServlet</servlet-class>
		<init-param>
			<param-name>private</param-name>
			<param-value>false</param-value>
		</init-param>
		<load-on-startup>4</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>ImageServlet</servlet-name>
		<display-name>ImageServlet</display-name>
		<servlet-class>com.liferay.portal.servlet.ImageServlet</servlet-class>
		<load-on-startup>5</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>LuceneServlet</servlet-name>
		<display-name>LuceneServlet</display-name>
		<servlet-class>com.liferay.portal.servlet.LuceneServlet</servlet-class>
		<load-on-startup>6</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>FCKeditorServlet</servlet-name>
		<servlet-class>com.liferay.portal.editor.fckeditor.ConnectorServlet</servlet-class>
		<load-on-startup>7</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>ResourceProxyServlet</servlet-name>
		<servlet-class>com.liferay.portal.wsrp.servlet.ResourceProxyServlet</servlet-class>
		<load-on-startup>8</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>ChatServlet</servlet-name>
		<display-name>ChatServlet</display-name>
		<servlet-class>com.liferay.portlet.chat.servlet.ChatServlet</servlet-class>
		<init-param>
			<param-name>chatServerClass</param-name>
			<param-value>com.liferay.portlet.chat.util.ChatServer</param-value>
		</init-param>
		<init-param>
			<param-name>config</param-name>
			<param-value>nfc/nfc.conf</param-value>
		</init-param>
		<load-on-startup>9</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>HttpService</servlet-name>
		<servlet-class>com.liferay.portlet.httpbridge.servlet.HttpService</servlet-class>
		<load-on-startup>10</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>UserService</servlet-name>
		<servlet-class>com.liferay.portlet.httpbridge.servlet.UserService</servlet-class>
		<load-on-startup>11</load-on-startup>
	</servlet>
	<servlet>
		<servlet-name>RedirectServlet</servlet-name>
		<servlet-class>com.agloco.servlet.RedirectServlet</servlet-class>
	</servlet>

	<!-- DRW SERVLET START -->
	<servlet>
	    <servlet-name>dwr-invoker</servlet-name>
	    <servlet-class>uk.ltd.getahead.dwr.DWRServlet</servlet-class>
	    <init-param>
	      <param-name>debug</param-name>
	      <param-value>false</param-value>
	    </init-param>
	    <init-param>
	      <param-name>scriptCompressed</param-name>
	      <param-value>false</param-value>
	    </init-param>
	    <load-on-startup>1</load-on-startup>
  	</servlet>

  	<servlet-mapping>
	    <servlet-name>dwr-invoker</servlet-name>
	    <url-pattern>/dwr/*</url-pattern>
  	</servlet-mapping>
	<!-- DRW SERVLET END-->
  
	<servlet-mapping>
		<servlet-name>MainServlet</servlet-name>
		<url-pattern>/c/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>RedirectServlet</servlet-name>
		<url-pattern>/r/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>FriendlyURLPrivateServlet</servlet-name>
		<url-pattern>/group/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>FriendlyURLPublicServlet</servlet-name>
		<url-pattern>/web/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ImageServlet</servlet-name>
		<url-pattern>/image/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>FCKeditorServlet</servlet-name>
		<url-pattern>/html/js/editor/fckeditor/editor/filemanager/browser/liferay/connectors/jsp/connector</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ResourceProxyServlet</servlet-name>
		<url-pattern>/wsrp/resource_proxy/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ChatServlet</servlet-name>
		<url-pattern>/chat/*</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>HttpService</servlet-name>
		<url-pattern>/httpbridge/http</url-pattern>
	</servlet-mapping>
	
	<session-config>
		<session-timeout>30</session-timeout>
	</session-config>
	<welcome-file-list>
		<welcome-file>index.html</welcome-file>
		<welcome-file>index.jsp</welcome-file>
	</welcome-file-list>

	<error-page>
		<error-code>404</error-code>
		<location>/error.html</location>
	</error-page>
	<error-page>
		<error-code>500</error-code>
		<location>/error.html</location>
	</error-page>
	<error-page>
		<error-code>501</error-code>
		<location>/error.html</location>
	</error-page>
	<error-page>
		<error-code>503</error-code>
		<location>/error.html</location>
	</error-page>
	<error-page>
		<error-code>505</error-code>
		<location>/error.html</location>
	</error-page>

	<taglib>
		<taglib-uri>http://displaytag.sf.net</taglib-uri>
		<taglib-location>/WEB-INF/tld/displaytag.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://easyconf.sourceforge.net/tags-easyconf</taglib-uri>
		<taglib-location>/WEB-INF/tld/easyconf.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://java.sun.com/jstl/core_rt</taglib-uri>
		<taglib-location>/WEB-INF/tld/c.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://java.sun.com/jstl/fmt_rt</taglib-uri>
		<taglib-location>/WEB-INF/tld/fmt-rt.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://java.sun.com/jstl/sql_rt</taglib-uri>
		<taglib-location>/WEB-INF/tld/sql-rt.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://java.sun.com/jstl/xml_rt</taglib-uri>
		<taglib-location>/WEB-INF/tld/x-rt.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://java.sun.com/portlet</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-portlet.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://liferay.com/tld/portlet</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-portlet-ext.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://liferay.com/tld/security</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-security.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://liferay.com/tld/theme</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-theme.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://liferay.com/tld/ui</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-ui.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://liferay.com/tld/util</taglib-uri>
		<taglib-location>/WEB-INF/tld/liferay-util.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-bean</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-bean.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-bean-el</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-bean-el.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-html</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-html.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-html-el</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-html-el.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-logic</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-logic.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-logic-el</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-logic-el.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-nested</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-nested.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-tiles</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-tiles.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://struts.apache.org/tags-tiles-el</taglib-uri>
		<taglib-location>/WEB-INF/tld/struts-tiles-el.tld</taglib-location>
	</taglib>
	<taglib>
		<taglib-uri>http://www.agloco.com/agloco-util</taglib-uri>
		<taglib-location>/WEB-INF/tld/agloco-util.tld</taglib-location>
	</taglib>
	<resource-ref>
		<res-ref-name>jdbc/LiferayPool</res-ref-name>
		<res-type>javax.sql.DataSource</res-type>
		<res-auth>Container</res-auth>
		<res-sharing-scope>Shareable</res-sharing-scope>
	</resource-ref>
	<resource-ref>
		<res-ref-name>mail/MailSession</res-ref-name>
		<res-type>javax.mail.Session</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>
	<security-constraint>
		<web-resource-collection>
			<web-resource-name>/c/portal/protected</web-resource-name>
			<url-pattern>/c/portal/protected</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<auth-constraint>
			<role-name>users</role-name>
		</auth-constraint>
		<user-data-constraint>
			<transport-guarantee>NONE</transport-guarantee>
		</user-data-constraint>
	</security-constraint>
	<!--security-constraint>
		<web-resource-collection>
			<web-resource-name>/c/portal/login</web-resource-name>
			<url-pattern>/c/portal/login</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<user-data-constraint>
			<transport-guarantee>CONFIDENTIAL</transport-guarantee>
		</user-data-constraint>
	</security-constraint>
	<security-constraint>
		<web-resource-collection>
			<web-resource-name>/web/guest/signup</web-resource-name>
			<url-pattern>/web/guest/signup</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<user-data-constraint>
			<transport-guarantee>CONFIDENTIAL</transport-guarantee>
		</user-data-constraint>
	</security-constraint>
	<security-constraint>
		<web-resource-collection>
			<web-resource-name>/web/guest/signin</web-resource-name>
			<url-pattern>/web/guest/signin</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<user-data-constraint>
			<transport-guarantee>CONFIDENTIAL</transport-guarantee>
		</user-data-constraint>
	</security-constraint>
	<security-constraint>
		<web-resource-collection>
			<web-resource-name>/web/guest/forgetinfo</web-resource-name>
			<url-pattern>/web/guest/forgetinfo</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<user-data-constraint>
			<transport-guarantee>CONFIDENTIAL</transport-guarantee>
		</user-data-constraint>
	</security-constraint>
		<security-constraint>
		<web-resource-collection>
			<web-resource-name>/web/guest/myprofile</web-resource-name>
			<url-pattern>/web/guest/myprofile</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
		</web-resource-collection>
		<user-data-constraint>
			<transport-guarantee>CONFIDENTIAL</transport-guarantee>
		</user-data-constraint>
	</security-constraint-->
	<login-config>
		<auth-method>FORM</auth-method>
		<realm-name>PortalRealm</realm-name>
		<form-login-config>
			<form-login-page>/c/portal/j_login</form-login-page>
			<form-error-page>/c/portal/j_login_error</form-error-page>
		</form-login-config>
	</login-config>
	<security-role>
		<role-name>users</role-name>
	</security-role>
</web-app>